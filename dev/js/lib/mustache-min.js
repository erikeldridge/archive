/*!
  mustache.js â€” Logic-less templates in JavaScript
  version 0.4.2
  See http://mustache.github.com/ for more info.
*/
var Mustache=function(){var a=Object.prototype.toString;Array.isArray=Array.isArray||function(j){return a.call(j)=="[object Array]"};var i=String.prototype.trim,b;if(i){b=function(j){return j==null?"":i.call(j)}}else{var c,g;if((/\S/).test("\xA0")){c=/^[\s\xA0]+/;g=/[\s\xA0]+$/}else{c=/^\s+/;g=/\s+$/}b=function(j){return j==null?"":j.toString().replace(c,"").replace(g,"")}}var f={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function h(j){return String(j).replace(/&(?!#?\w+;)|[<>"']/g,function(k){return f[k]||k})}var e={};var d=function(){};d.prototype={otag:"{{",ctag:"}}",pragmas:{},buffer:[],pragmas_implemented:{"IMPLICIT-ITERATOR":true},context:{},render:function(m,l,k,n){if(!n){this.context=l;this.buffer=[]}if(!this.includes("",m)){if(n){return m}else{this.send(m);return}}m=this.render_pragmas(m);var j=this.render_section(m,l,k);if(j===false){j=this.render_tags(m,l,k,n)}if(n){return j}else{this.sendLines(j)}},send:function(j){if(j!==""){this.buffer.push(j)}},sendLines:function(l){if(l){var j=l.split("\n");for(var k=0;k<j.length;k++){this.send(j[k])}}},render_pragmas:function(j){if(!this.includes("%",j)){return j}var l=this;var k=this.getCachedRegex("render_pragmas",function(n,m){return new RegExp(n+"%([\\w-]+) ?([\\w]+=[\\w]+)?"+m,"g")});return j.replace(k,function(o,m,n){if(!l.pragmas_implemented[m]){throw ({message:"This implementation of mustache doesn't understand the '"+m+"' pragma"})}l.pragmas[m]={};if(n){var p=n.split("=");l.pragmas[m][p[0]]=p[1]}return""})},render_partial:function(j,l,k){j=b(j);if(!k||k[j]===undefined){throw ({message:"unknown_partial '"+j+"'"})}if(!l||typeof l[j]!="object"){return this.render(k[j],l,k,true)}return this.render(k[j],l[j],k,true)},render_section:function(l,k,j){if(!this.includes("#",l)&&!this.includes("^",l)){return false}var n=this;var m=this.getCachedRegex("render_section",function(p,o){return new RegExp("^([\\s\\S]*?)"+p+"(\\^|\\#)\\s*(.+?)\\s*"+o+"\n*([\\s\\S]*?)"+p+"\\/\\s*\\3\\s*"+o+"\\s*([\\s\\S]*)$","g")});return l.replace(m,function(r,v,u,q,s,p){var x=v?n.render_tags(v,k,j,true):"",t=p?n.render(p,k,j,true):"",o,w=n.find(q,k);if(u==="^"){if(!w||Array.isArray(w)&&w.length===0){o=n.render(s,k,j,true)}else{o=""}}else{if(u==="#"){if(Array.isArray(w)){o=n.map(w,function(y){return n.render(s,n.create_context(y),j,true)}).join("")}else{if(n.is_object(w)){o=n.render(s,n.create_context(w),j,true)}else{if(typeof w=="function"){o=w.call(k,s,function(y){return n.render(y,k,j,true)})}else{if(w){o=n.render(s,k,j,true)}else{o=""}}}}}}return x+o+t})},render_tags:function(r,j,l,n){var m=this;var q=function(){return m.getCachedRegex("render_tags",function(u,t){return new RegExp(u+"(=|!|>|&|\\{|%)?([^#\\^]+?)\\1?"+t+"+","g")})};var o=q();var p=function(v,t,u){switch(t){case"!":return"";case"=":m.set_delimiters(u);o=q();return"";case">":return m.render_partial(u,j,l);case"{":case"&":return m.find(u,j);default:return h(m.find(u,j))}};var s=r.split("\n");for(var k=0;k<s.length;k++){s[k]=s[k].replace(o,p,this);if(!n){this.send(s[k])}}if(n){return s.join("\n")}},set_delimiters:function(k){var j=k.split(" ");this.otag=this.escape_regex(j[0]);this.ctag=this.escape_regex(j[1])},escape_regex:function(k){if(!arguments.callee.sRE){var j=["/",".","*","+","?","|","(",")","[","]","{","}","\\"];arguments.callee.sRE=new RegExp("(\\"+j.join("|\\")+")","g")}return k.replace(arguments.callee.sRE,"\\$1")},find:function(l,m){l=b(l);function k(o){return o===false||o===0||o}var n;if(l.match(/([a-z_]+)\./ig)){var j=this.walk_context(l,m);if(k(j)){n=j}}else{if(k(m[l])){n=m[l]}else{if(k(this.context[l])){n=this.context[l]}}}if(typeof n=="function"){return n.apply(m)}if(n!==undefined){return n}return""},walk_context:function(j,k){var n=j.split(".");var m=(k[n[0]]!=undefined)?k:this.context;var l=m[n.shift()];while(l!=undefined&&n.length>0){m=l;l=l[n.shift()]}if(typeof l=="function"){return l.apply(m)}return l},includes:function(k,j){return j.indexOf(this.otag+k)!=-1},create_context:function(k){if(this.is_object(k)){return k}else{var l=".";if(this.pragmas["IMPLICIT-ITERATOR"]){l=this.pragmas["IMPLICIT-ITERATOR"].iterator}var j={};j[l]=k;return j}},is_object:function(j){return j&&typeof j=="object"},map:function(o,m){if(typeof o.map=="function"){return o.map(m)}else{var n=[];var j=o.length;for(var k=0;k<j;k++){n.push(m(o[k]))}return n}},getCachedRegex:function(k,n){var m=e[this.otag];if(!m){m=e[this.otag]={}}var j=m[this.ctag];if(!j){j=m[this.ctag]={}}var l=j[k];if(!l){l=j[k]=n(this.otag,this.ctag)}return l}};return({name:"mustache.js",version:"0.4.2",to_html:function(l,j,k,n){var m=new d();if(n){m.send=n}m.render(l,j||{},k);if(!n){return m.buffer.join("\n")}}})}();