<style>
.pass{
	color:green;
}
.fail{
	color:red;
}
</style>
<div id="output"><br/></div>
<script>
var foreach = function(collection, callback){
    	if(collection.length){//array or node list
    		for(var i = 0; i < collection.length; i++){
    			callback(i, collection[i]);
    		}
    	}else if(collection.hasOwnProperty){
    		for(var key in collection){
    			if(collection.hasOwnProperty(key)){
    				callback(key, collection[key]);
    			}
    		}
    	}else{
    		throw('foreach() error: collection (' + collection + ') is neither an array nor an object');
    	}
    },
	sprintf = function (/*format, arg1, arg2  ...*/) {
		var params = Array.prototype.slice.apply(arguments),//cache arguments quasi-array as actual array.  ref: http://www.hunlock.com/blogs/Functional_Javascript#quickIDX11
			format = params[0],
			args = params.slice(1),
			pieces = format.split('%%');
		foreach(args, function (index, arg) {
			if (!arg) {
				throw('sprintf() error: expecting string, but received'+arg+', which is a'+typeof arg+'Context: '+params.toString());
			} else {
				pieces[index] = pieces[index] + arg.toString();
			}
		});
		return pieces.join('');
	},
	createTestSuite = function(settings){
		settings.outputId = 'output';
		settings.passClassName = 'pass';
		settings.failClassName = 'fail';
		var tests = [];
        return {
            'addTest':function(fn){
				foreach(settings, function(settingName, settingValue){
					fn.settings[settingName] = settingValue;
				});
				tests.push(fn);
			},
			'run':function(){
				foreach(tests, function(i, test){
					test.run();
				});
			}
        };
    },
    createTest = function(settings){
		return {
			'settings':settings,
			'run':function(){
				if(settings.setUp){
					var setUpResults = settings.setUp();
				}
				if(settings.test(setUpResults)){
					// console.log('true');
					var html = sprintf('<div class="%%">%%: %%</div>', settings.passClassName, settings.suiteName, settings.testName);
					document.getElementById(settings.outputId).innerHTML += html;
				}else{console.log(settings);
					var html = sprintf('<div class="%%">%%: %%</div>', settings.failClassName, settings.suiteName, settings.testName);
					document.getElementById(settings.outputId).innerHTML += html;
				}
				if(settings.tearDown){
					settings.tearDown(setUpResults);
				}
			}
		};
	};
var suite = createTestSuite({'suiteName':'addClass'}),
    test1 = createTest({
		'testName':'no starting class',
        'setUp':function(){
            var div = document.createElement('div');
			div.className = 'output';
			return {//setUpResults
				'div':div
			};
        },
        'tearDown':function(setUpResults){
			delete setUpResults.div;
            console.log(setUpResults);
        },
        'test':function(setUpResults){
            console.log('test');
			return false;
        }
    });
    suite.addTest(test1);
	suite.run();
</script>